<mat-card class="w-100 mt-n3 p-0" (ngSubmit)="store()" [formGroup]="form" appLoader>
    <mat-card-content>
        <mat-tab-group class="group-pet">
            <mat-tab label="Información basica *">
                <mat-form-field class="w-100 mb-2" appearance="outline" hintLabel="Max 250 caracteres">
                    <mat-label>Nombre</mat-label>
                    <input matInput #name maxlength="250" formControlName="name" placeholder="Nombre" name="name"
                        required>
                    <mat-hint align="end">{{name.value?.length || 0}}/250</mat-hint>
                    <mat-error appInvalidMessage="name"></mat-error>
                </mat-form-field>

                <mat-form-field class="w-100" appearance="outline">
                    <mat-label>Precio</mat-label>
                    <input type="number" min="3" formControlName="price" matInput placeholder="Precio" name="price"
                        required>
                    <mat-error appInvalidMessage="price"></mat-error>
                </mat-form-field>
                <mat-form-field class="w-100" appearance="outline">
                    <mat-label>Stock</mat-label>
                    <input type="number" min="1" formControlName="stock" matInput placeholder="stock" name="stock"
                        required>
                    <mat-error appInvalidMessage="stock"></mat-error>
                </mat-form-field>

                <mat-form-field class="w-100 mb-2" appearance="outline" hintLabel="Max 500 caracteres">
                    <mat-label>Descripción corta</mat-label>
                    <textarea matInput #short_description formControlName="short_description"
                        placeholder="Descripción corta" name="short_description" required></textarea>
                    <mat-hint align="end">{{short_description.value?.length || 0}}/500</mat-hint>
                    <mat-error appInvalidMessage="short_description"></mat-error>
                </mat-form-field>

                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Categoría</mat-label>
                    <mat-select placeholder="Categoría" formControlName="category_id" required>
                        <mat-optgroup *ngFor="let category of categories | async" [label]="category.name | titlecase">
                            <mat-option *ngFor="let subCategory of category.categories" [value]="subCategory.id">
                                {{subCategory.name}}
                            </mat-option>
                        </mat-optgroup>
                    </mat-select>
                    <mat-error appInvalidMessage="category_id"></mat-error>
                </mat-form-field>
            </mat-tab>

            <mat-tab label="Imagen *">
                <app-upload formControlName="cover"></app-upload>
            </mat-tab>

            <mat-tab label="Transporte *">
                <div class="row" [formGroup]="form.get('transport')">
                    <mat-form-field class="w-100 mb-2 col-sm-6" appearance="outline" hintLabel="Max 191 caracteres">
                        <mat-label>Anchura</mat-label>
                        <input matInput #width maxlength="191" formControlName="width" placeholder="Anchura"
                            name="width" required>
                        <span matSuffix>cm</span>
                        <mat-hint align="end">{{width.value?.length || 0}}/191</mat-hint>
                        <mat-error appInvalidMessage="width"></mat-error>
                    </mat-form-field>

                    <mat-form-field class="w-100 mb-2 col-sm-6" appearance="outline" hintLabel="Max 191 caracteres">
                        <mat-label>Altura</mat-label>
                        <input matInput #height maxlength="191" formControlName="height" placeholder="Altura"
                            name="height" required>
                        <span matSuffix>cm</span>
                        <mat-hint align="end">{{height.value?.length || 0}}/191</mat-hint>
                        <mat-error appInvalidMessage="height"></mat-error>
                    </mat-form-field>

                    <mat-form-field class="w-100 mb-2 col-sm-6" appearance="outline" hintLabel="Max 191 caracteres">
                        <mat-label>Profundidad</mat-label>
                        <input matInput #depth maxlength="191" formControlName="depth" placeholder="Altura" name="depth"
                            required>
                        <span matSuffix>cm</span>
                        <mat-hint align="end">{{depth.value?.length || 0}}/191</mat-hint>
                        <mat-error appInvalidMessage="depth"></mat-error>
                    </mat-form-field>

                    <mat-form-field class="w-100 mb-2 col-sm-6" appearance="outline" hintLabel="Max 191 caracteres">
                        <mat-label>Peso</mat-label>
                        <input matInput #weight maxlength="191" formControlName="weight" placeholder="Peso" name="weight"
                            required>
                        <span matSuffix>kg</span>
                        <mat-hint align="end">{{weight.value?.length || 0}}/191</mat-hint>
                        <mat-error appInvalidMessage="weight"></mat-error>
                    </mat-form-field>
                </div>
            </mat-tab>

            <mat-tab label="Información extra">
                <mat-form-field class="w-100 mb-2" appearance="outline">
                    <mat-label>Color</mat-label>
                    <mat-select placeholder="Color" formControlName="color_id">
                        <mat-option *ngFor="let color of colors | async" [value]="color.id">{{color.name}}
                        </mat-option>
                    </mat-select>
                    <mat-error appInvalidMessage="color_id"></mat-error>
                </mat-form-field>

                <mat-form-field class="w-100" appearance="outline">
                    <mat-label>Descripción</mat-label>
                    <textarea matInput rows="6" placeholder="Descripción" formControlName="description"
                        name="description"></textarea>
                    <mat-error appInvalidMessage="description"></mat-error>
                </mat-form-field>
            </mat-tab>
        </mat-tab-group>
    </mat-card-content>
</mat-card>
<button type="button" [disabled]="form.invalid" (click)="store()" mat-raised-button
    class="position-absolute link-new">Guardar</button>
